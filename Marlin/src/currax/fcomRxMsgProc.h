#pragma once

/*==============================================================================
FCom serial receive message handler.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "fcomMsg.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

namespace FCom
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Receive message processor for the fcom byte content messages that are
// received from the udc1 usb port. It is passed a message and it calls
// a specific message handler according to the message type.

class  RxMsgProc
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   RxMsgProc();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Receive message handler. It calls one of the following specific 
   // message handlers, according to the message type.    
   void processRxMsg (BaseMsg* aMsg);

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Specific receive message handlers.
   void processRxMsg (SettingsMsg*    aRxMsg);
   void processRxMsg (EchoRequestMsg* aRxMsg);
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global singular instance.

#ifdef    _FCOMRXMSGPROC_CPP_
          RxMsgProc gRxMsgProc;
#else
   extern RxMsgProc gRxMsgProc;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace
